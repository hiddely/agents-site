(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(n){if(n.ep)return;n.ep=!0;const e=a(n);fetch(n.href,e)}})();function y(){const i=document.querySelector("#connection-svg");if(!i||document.querySelectorAll(".node").length===0)return;const a=[{from:"cloud-agent",to:"sub-agent-1"},{from:"cloud-agent",to:"sub-agent-2"},{from:"cloud-agent",to:"encrypted-agent"},{from:"encrypted-agent",to:"credential-proxy"},{from:"credential-proxy",to:"sensitive-site"},{from:"sensitive-site",to:"credential-proxy",return:!0},{from:"encrypted-agent",to:"cloud-agent",return:!0}];function d(e){const o=document.querySelector(`[data-node="${e}"]`);if(!o||!i)return null;const t=o.getBoundingClientRect(),s=i.getBoundingClientRect();return{x:t.left-s.left+t.width/2,y:t.top-s.top+t.height/2}}a.forEach(e=>{const o=d(e.from),t=d(e.to);if(o&&t){const s=document.createElementNS("http://www.w3.org/2000/svg","path"),m=(o.x+t.x)/2,c=(o.y+t.y)/2,r=t.x-o.x,u=t.y-o.y,l=Math.sqrt(r*r+u*u)*.2,f=`M ${o.x} ${o.y} Q ${m+l} ${c} ${t.x} ${t.y}`;s.setAttribute("d",f);const g=e.return?"connection-line return-path":"connection-line";s.setAttribute("class",g),s.setAttribute("data-path",`${e.from}-${e.to}`),i.appendChild(s)}});function n(e,o){if(!i)return;const t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.setAttribute("r","4"),t.setAttribute("class","particle");const s=document.createElementNS("http://www.w3.org/2000/svg","animateMotion");s.setAttribute("dur","3s"),s.setAttribute("repeatCount","indefinite"),s.setAttribute("begin",`${o}s`);const m=document.createElementNS("http://www.w3.org/2000/svg","mpath");m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${e.id}`),s.appendChild(m),t.appendChild(s);const c=document.createElementNS("http://www.w3.org/2000/svg","animate");c.setAttribute("attributeName","opacity"),c.setAttribute("values","0;1;1;0"),c.setAttribute("keyTimes","0;0.1;0.9;1"),c.setAttribute("dur","3s"),c.setAttribute("repeatCount","indefinite"),c.setAttribute("begin",`${o}s`),t.appendChild(c),i.appendChild(t)}setTimeout(()=>{i.querySelectorAll(".connection-line").forEach((o,t)=>{const s=o;s.id=`path-${t}`,n(s,t*.5),n(s,t*.5+1.5)})},1e3)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();function x(i){const p=i.innerHTML;i.classList.remove("hidden"),i.innerHTML="";const a=document.createElement("div");a.innerHTML=p;const d=[],n=[];function e(r,u){if(r.nodeType===Node.TEXT_NODE){const l=r.textContent||"";l.trim().length>0&&l.split(/(\s+)/).forEach(g=>{g.length>0&&d.push({element:u,text:g,index:d.length})})}else if(r.nodeType===Node.ELEMENT_NODE){const l=r;if(l.classList.contains("response-meta")){const g=l.cloneNode(!0);g.style.display="none",u.appendChild(g),n.push({clone:g,original:l});return}const f=l.cloneNode(!1);u.appendChild(f),Array.from(l.childNodes).forEach(g=>{e(g,f)})}}Array.from(a.childNodes).forEach(r=>{e(r,i)});let o=0;const t=50;let s=null,m=null;function c(){if(o>=d.length){setTimeout(()=>{n.forEach(({clone:u})=>{u.style.display=""})},200);return}const r=d[o];m!==r.element&&(m=r.element,s=document.createTextNode(""),m.appendChild(s)),s&&(s.textContent+=r.text),o++,setTimeout(c,t)}c()}function h(){const i=document.getElementById("demo-send-btn"),p=document.getElementById("demo-viz"),a=document.getElementById("demo-status"),d=document.getElementById("planner-agent"),n=document.getElementById("encrypted-agent"),e=document.getElementById("chat-messages"),o=document.getElementById("user-message"),t=document.getElementById("agent-response"),s=document.getElementById("typing-indicator"),m=document.getElementById("response-text");!i||!p||!a||!d||!n||!e||!o||!t||!s||!m||i.addEventListener("click",()=>{e.classList.remove("hidden"),p.classList.remove("hidden"),d.classList.add("hidden"),n.classList.add("hidden"),o.classList.add("hidden"),t.classList.add("hidden"),s.classList.add("hidden"),m.classList.add("hidden");const c=d.querySelector(".loading-spinner"),r=d.querySelector(".demo-agent-text"),u=n.querySelector(".loading-spinner"),l=n.querySelector(".demo-agent-text");c&&(c.style.display="block"),r&&(r.textContent="Analyzing request..."),u&&(u.style.display="block"),l&&(l.textContent="Accessing Secure Banking API..."),o.classList.remove("hidden"),i.setAttribute("disabled","true"),i.style.opacity="0.6",i.style.cursor="not-allowed",setTimeout(()=>{t.classList.remove("hidden"),s.classList.remove("hidden")},300),a.textContent="Setting up Planner...",setTimeout(()=>{a.textContent="Planner analyzing request...",d.classList.remove("hidden")},800),setTimeout(()=>{c&&(c.style.display="none"),r&&(r.textContent="✓ Analysis complete - sensitive data detected - spawn encrypted agent")},2500),setTimeout(()=>{a.textContent="Deploying encrypted agent...",n.classList.remove("hidden")},3e3),setTimeout(()=>{a.textContent="Encrypted agent accessing secure data...",l&&(l.textContent="Fetching from Secure Banking API and computing average...")},4500),setTimeout(()=>{u&&(u.style.display="none"),l&&(l.textContent="✓ Data retrieved and processed - return average back to Planner Agent")},9500),setTimeout(()=>{a.textContent="Planner post-processing result...",c&&(c.style.display="block"),r&&(r.textContent="Output received, post-processing result...")},1e4),setTimeout(()=>{a.textContent="Computation complete!",c&&(c.style.display="none"),r&&(r.textContent="✓ Post-processing complete"),s.classList.add("hidden"),x(m),setTimeout(()=>{i.removeAttribute("disabled"),i.style.opacity="1",i.style.cursor="pointer"},2500)},11500)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h):h();document.querySelectorAll('a[href^="#"]').forEach(i=>{i.addEventListener("click",p=>{p.preventDefault();const a=i.getAttribute("href");if(a&&a!=="#"){const d=document.querySelector(a);d&&d.scrollIntoView({behavior:"smooth",block:"start"})}})});
